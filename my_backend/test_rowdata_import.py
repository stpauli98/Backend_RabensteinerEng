#!/usr/bin/env python3
"""
Test script za verifikaciju da RowData modul mo≈æe da se importuje bez Redis-a
"""
import os
import sys

# Postavi environment da koristi file storage
os.environ['ROWDATA_STORAGE_BACKEND'] = 'file'

print("Testing RowData module import...")
print("-" * 50)

try:
    # Test importovanje modula
    from RowData import rowdata_blueprint
    print("‚úÖ Successfully imported rowdata_blueprint")
    
    # Test factory import
    from RowData.repositories.repository_factory import get_repository, get_storage_info
    print("‚úÖ Successfully imported repository factory")
    
    # Test storage info
    storage_info = get_storage_info()
    print(f"‚úÖ Storage backend: {storage_info['backend']} - {storage_info['description']}")
    
    # Test repository creation
    repo = get_repository()
    print(f"‚úÖ Repository created: {type(repo).__name__}")
    
    # Test da li je file-based
    if hasattr(repo, 'base_path'):
        print(f"‚úÖ Using file storage at: {repo.base_path}")
    
    print("\n" + "=" * 50)
    print("üéâ SUCCESS! RowData module works without Redis!")
    print("=" * 50)
    
except ImportError as e:
    print(f"‚ùå Import error: {e}")
    import traceback
    traceback.print_exc()
except Exception as e:
    print(f"‚ùå Error: {e}")
    import traceback
    traceback.print_exc()